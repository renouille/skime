["/*657c4e1cb98f15d8ed4ed40c57839ec570f90f31",42,311096,"carousel.Item\",{extend:Ext.Decorator,config:{baseCls:\"x-carousel-item\",component:null,translatable:true}});Ext.define(\"Ext.carousel.Indicato",417506,32,"carouselindicator\",alternateClassName:\"Ext.Carousel.Indicato",417551,38,"carousel-indicator\",direction:\"horizontal\"",479840,42,"this.indicators=[];this.element.on({tap:\"onTap\",scope:this})}",416071,79,"c,a,b);if(a===\"horizontal\"){this.setBottom(0);this.setRight(null)}else{this.setRight(0);this.setBottom(null)}},addIndicator:function(){this.indicators.push(this.element.createChild({tag:\"span\"}))},removeIndicator:function(){var a=this.indicators;if(a.length>0){a.pop().destroy()}},setActiveIndex:function(b){var e=this.indicators,d=this.activeIndex,a=e[d],f=e[b],c=this.getBaseCls();if(a){a.removeCls(c,null,\"active\")}if(f){f.addCls(c,null,\"active\")}this.activeIndex=b;return this},onTap:function(f){var g=f.touch,a=this.element.getPageBox(),d=a.left+(a.width/2),b=a.top+(a.height/2),c=this.getDirection();if((c===\"horizontal\"&&g.pageX>=d)||(c===\"vertical\"&&g.pageY>=b)){this.fireEvent(\"next\",this)}else{this.fireEvent(\"previou",455056,34,"d=this.indicators,b,c,a;for(b=0,c=d.length;b<c;b++){a=d[b];a.destroy()}d.length=0",279995,38,"util.TranslatableGroup",150911,49,"items:[],activeIndex:0,itemLength:{x:0,y:0}},applyItems:function(a){return Ext.Array.from(a)},doTranslate:function(n,m){var l=this.getItems(),p=this.getActiveIndex(),j=this.getItemLength(),d=j.x,c=j.y,h=typeof n==\"number\",g=typeof m==\"number\",e,f,k,o,b,a;for(f=0,k=l.length;f<k;f++){o=l[f];if(o){e=(f-p);if(h){b=n+e*d}if(g){a=m+e*c}o.translate(b,a)}}}});Ext.define(\"Ext.carousel.Carous",252823,50,"Carousel\",xtype:\"carousel\",config:{baseCls:\"x-carousel\",direction:\"horizontal\",directionLock:false,animation:{duration:250,easing:{type:\"ease-out\"}},indicator:true,ui:\"dark\",itemConfig:{},bufferSize:1,itemLength:null},itemLength:0,offset:0,flickStartOffset:0,flickStartTime:0,dragDirection:0,count:0,painted:false,activeIndex:-1",297965,34,"element.on(",154059,59,"scope:this});this.element.on(\"resize\",\"onSizeChange\",this);this.carouselItems=[];this.orderedCarouselItems=[];this.inactiveCarouselItems=[];this.hiddenTranslation=0},updateBufferSize:function(n){var l=Ext.carousel.Item,h=n*2+1,m=this.isRendered(),c=this.innerElement,g=this.carouselItems,f=g.length,e=this.getItemConfig(),d=this.getItemLength(),j=this.getDirection(),b=j===\"horizontal\"?\"setWidth\":\"setHeight\",a,k;for(a=f;a<h;a++){k=Ext.factory(e,l);if(d){k[b].call(k,d)}k.setLayoutSizeFlags(this.LAYOUT_BOTH);g.push(k);c.append(k.renderElement);if(m&&k.setRendered(true)){k.fireEvent(\"renderedchange\",this,k,true)}}this.getTranslatable().setActiveIndex(n)},setRendered:function(g){var a=this.rendered;if(g!==a){this.rendered=g;var b=this.items.items,d=this.carouselItems,c,f,e;for(c=0,f=b.length;c<f;c++){e=b[c];if(!e.isInnerItem()){e.setRendered(g)}}for(c=0,f=d.length;c<f;c++){d[c].setRendered(g)}return true}return false},onSizeChange:function(){this.refreshSizing();this.refreshCarouselItems();this.refreshActiveItem()},onItemAdd:function(c,b",394718,33,"d=this.getInnerItems().indexOf(c),a=this.getIndicator();if(a&&c.isInnerItem()){a.addIndicator()}if(d<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(d)&&!this.isItemsInitializing){this.refreshActiveItem()}},doItemLayoutAdd:function(a){if(a.isInnerItem()",487875,35,"},onItemRemove:function(f,b",394718,33,"h=this.getInnerItems().indexOf(f),a=this.getIndicator(),d=this.carouselItems,c,e,g;if(f.isInnerItem()&&a){a.removeIndicator()}if(h<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(h)){for(c=0,e=d.length;c<e;c++){g=d[c];if(g.getComponent()===f){g.setComponent(null)}}this.refreshActiveItem()}},doItemLayoutRemove:function(a){if(a.isInnerItem()",487875,35,"},onInnerItemMove:function(b,c,a){if((this.isIndexDirty(c)||this.isIndexDirty(a))){this.refreshActiveItem()}},doItemLayoutMove:function(a){if(a.isInnerItem()",487875,35,"},isIndexDirty:function(b){var a=this.getActiveIndex(),c=this.getBufferSize();return(b>=a-c&&b<=a+c)},getTranslatable",153402,39,153065,49,"Group;a.setItems(this.orderedCarouselItems);a.on(\"animationend\",\"onAnimationEnd\",this)}return a},onDragStart:function(f){var d=this.getDirection(),b=f.absDeltaX,a=f.absDeltaY,c=this.getDirectionLock();this.isDragging=true;if(c){if((d===\"horizontal\"&&b>a)||(d===\"vertical\"&&a>b)){f",227232,54,229135,38,";this.dragStartOffset=this.offset;this.dragDirection=0},onDrag:function(k",227945,34,"l=this.dragStartOffset,m=this.getDirection(),n=m===\"horizontal\"?k.deltaX:k.deltaY,a=this.offset,j=this.flickStartTime,c=this.dragDirection,b=Ext.Date.now(),h=this.getActiveIndex(),f=this.getMaxItemIndex(),d=c,g;if((h===0&&n>0)||(h===f&&n<0)){n*=0.5}g=l+n;if(g>a){c=1}else{if(g<a){c=-1}}if(c!==d||(b-j)>300){this.flickStartOffset=a;this.flickStartTime=b}this.dragDirection=c;this.setOffset(g)},onDragEnd:function(k",156596,42,"k);this.isDragging=false;var a=Ext.Date.now(),j=this.itemLength,g=j/2,f=this.offset,n=this.getActiveIndex(),c=this.getMaxItemIndex(),h=0,m=f-this.flickStartOffset,b=a-this.flickStartTime,l=this.getIndicator(),d;if(b>0&&Math.abs(m)>=10){d=m/b;if(Math.abs(d)>=1){if(d<0&&n<c){h=-1}else{if(d>0&&n>0){h=1}}}}if(h===0){if(n<c&&f<-g){h=-1}else{if(n>0&&f>g){h=1}}}if(l){l.setActiveIndex(n-h)}this.animationDirection=h;this.setOffsetAnimated(h*j)},applyAnimation:function(a){a.easing=Ext.factory(a.easing,Ext.fx.easing.EaseOut);",223487,49,"getIndicator();this.currentAxis=(b===\"horizontal\")?\"x\":\"y\";if(a){a.setDirection(b)}},setOffset:function(a){this.offset=a",223241,33,"Axis(this.currentAxis,a+this.itemOffset);return this},setOffsetAnimated:function(b){var a=this.getIndicator();if(a){a.setActiveIndex(this.getActiveIndex()-this.animationDirection)}this.offset=b",223241,33,"Axis(this.currentAxis,b+this.itemOffset,this.getAnimation());return this},onAnimationEnd:function(b){var c=this.getActiveIndex(),a=this.animationDirection,e=this.currentAxis,f=b[e],d=this.itemLength,g;if(a===-1){g=d+f}else{if(a===1){g=f-d}else{g=f}}g-=this.itemOffset;this.offset=g;this.setActiveItem(c-a",157267,34,"Sizing();this.refreshActiveItem()},refreshSizing:function(){var a=this.element,b=this.getItemLength(),e={x:0,y:0},c,d;if",190331,35,"){d=a.getWidth()}else{d=a.getHeight()}this.hiddenTranslation=-d;if(b===null){b=d;c=0}else{c=(d-b)/2}this.itemLength=b;this.itemOffset=c;e[this.currentAxis]=b;this.getTranslatable().setItemLength(e)},refreshOffset:function(){this.setOffset(this.offset)},refreshActiveItem:function(){this.doSetActiveItem(this.getActiveItem())},getActiveIndex:function(){return this.activeIndex},refreshActiveIndex:function(){this.activeIndex=this.getInnerItemIndex(this.getActiveItem())},refreshCarouselItems:function(){var a=this.carousel",183055,47,"c.getTranslatable().refresh()}this.refreshInactiveCarouselItems()},refreshInactiveCarouselItems:function(){var a=this.inactiveCarouselItems,f=this.hiddenTranslation,c=this.currentAxis,b,e,d;for(b=0,e=a.length;b<e;b++){d=a[b];d.translateAxis(c,f)}},getMaxItemIndex",247888,34,".length-1},getInnerItemIndex",245706,48,"getInnerItemAt",245706,35,"[a]},applyActiveItem:function(){var b=this.callParent(arguments),a;if(b){a=this.getInnerItemIndex(b);if(a!==-1){this.activeIndex=a;return b}}},doSetActiveItem:function(g){var q=this.getActiveIndex(),e=this.getMaxItemIndex(),m=this.getIndicator(),c=this.getBufferSize(),k=this.carouselItems.slice(),n=this.orderedCarouselItems,p={},o={},a,l,b,f,h,j,d;if(k.length===0",487875,36,"n.length=0;if(g){b=g.getId();o[b]=g;p[b]=c;if(q>0){for(f=1;f<=c;f++){h=q-f;if(h>=0){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c-f}else{break}}}if(q<e){for(f=1;f<=c;f++){h=q+f;if(h<=e){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c+f}else{break}}}for(f=0,j=k.length;f<j;f++){d=k[f];l=d.getComponent();if(l){b=l.getId();if(p.hasOwnProperty(b)){k.splice(f,1);f--;j--;delete o[b];n[p[b]]=d}}}for(b in o){if(o.hasOwnProperty(b)){a=o[b];d=k.pop();d.setComponent(a);n[p[b]]=d}}}this.inactiveCarouselItems.length=0;this.inactiveCarouselItems=k;this.refreshOffset();this.refreshInactiveCarouselItems();if(m){m.setActiveIndex(q)}},next:function(){this.setOffset(0);if(this.activeIndex===this.getMaxItemIndex()){return this}this.animationDirection=-1;this.setOffsetAnimated(-this.itemLength);return this},previous:function(){this.setOffset(0);if(this.activeIndex===0){return this}this.animationDirection=1;this.setOffsetAnimated(this.itemLength);return this},applyIndicato",235392,41,"carousel.Indicator",283130,33,"if(a){this.insertFirst(a);a.setUi(this.getUi());a.on({next:\"next\",previous:\"previous\",scope:this})",152000,33,"carouselItems.slice();this.carouselItems.length=0;Ext.destroy(a,this.getIndicator(),this.translatable);this.callParent();delete this.carouselItems",485184,33,311138,209860,"/10.192.81.72",521024,34,"10.192.81.72/skime/server/websockets\",skimeUrl:\"http://10.192.81.72/skime",389952,45,521183,276,"_id\")",544606,44,521507,1197,",{name:\"profilePicture\",instanceName:\"profilePicture\",model:\"skiMe.model.ProfilePicture\",associationKey:\"profilePicture\",getterName:\"getProfilePicture\",setterName:\"setProfilePicture\"",562576,130,522833,427,567280,51,523312,972,"if=\"profilePicture !== undefined",523904,77,"profilePicture.url_thumbnail}\" />',\"<tpl else>\"",576544,92,"dflt_thumb.jpg",579470,108,524496,498,"if(skiMe.app.user.getProfilePicture()!=null){var d=skiMe.app.user.getProfilePicture().get(\"url_thumbnail\")}else{var d=\"/files/img/default/dflt_thumb.jpg\"}var ",525071,86,"}",525182,934,"webcam",526100,2341,"setWebcam",528360,36,528441,146,"this.getWebcam",528565,1113,530015,675,"3",530691,1305,"g.onclick=function(){console.log(\"Feature not ready yet.\")}",531995,35,"e.appendChild(g",532028,1187,529681,34,"b=this.getOwnPositionMarker();var d=this.getGeo();var c=null;if(b!=null){this.getMap().removeLayer(b)}",529793,82,"Latitude(),d",529905,45,"this",529951,33,"this.getMap());return d",533210,324,",addWebcam:function(a){var b=this.getWebcamLayerGroup();var c=L.AwesomeMarkers.icon({icon:\"picture\",color:\"darkblue\"});webcamMarker=L.marker([a.lat,a.lng],{icon:c});b.addLayer(webcamMarker);return webcamMarker",533533,2920,"b",536495,137,"b",536665,2103,"6",538769,140,538956,126,"c,b,e){if(e){console.log(\"Pistes loaded\"",539150,71,"d",539222,38,"d",539261,43,539315,53,"c,b,e){if(e){console.log(\"Lifts loaded\"",539150,71,"d",539222,38,"d",539261,43,539600,61,"c,b,d){a.dataLoaded();if(d",539700,91,539802,55,"c,b,d){a.dataLoaded();if(d",539896,201,"No friends found",540124,59,"c,b,d){a.dataLoaded();if(d",540209,196,"No groups found.\")}}});Ext.getStore(\"resor",539628,33,"c,b,d){if(d){console.log(\"Resorts loaded\"",539150,35,"Error while loading resort",540430,176,"MapController\").showData(",558944,39,540606,1391,"s:{}",542013,158,542242,329,"2",542572,80,"meetingPointStore\").sync(",542636,276,"resortStore\").each(function(c){c.webcams().each(function(d){b.addWebcam(d,c.webcams())})}",542937,38,542976,416,576032,34,"skiMe.app.user.getProfilePicture().get(\"url_thumbnail\"",543523,80,"d,a,e){var c=this.getFriendsMarkers();if(d.getId() in c){var f=c[d",543668,50,"f)}var h=d.get(\"name\");var j=",576032,34,"d.getProfilePicture().get(\"url_thumbnail\");var g=null;if(e){g=\"green\"}else{g",543900,56,"g);c[d",543962,43,"c,b){var d=this.getFriendsMarkers();if(c.getId() in d){var a=d[c.getId()];a.setLatLng(b);console.log(\"marker updated\")}},addWebcam:function(b,d){var c=this",558288,42,"var e=this.getLeafletmap().addWebcam(a);e.on(\"click\",function(f){var g=Ext.Viewport.add({xtype:\"imageCarousel\",images:d});g.setActiveItem(d.indexOf(b));g.down(\"#carouselTitlebar\").setTitle(d.indexOf(b)+1+\" of \"+d.getAllCount());g.show()}",545487,34,544126,669,"_id:f.user",544805,197,545003,60,",failure:function(j){b.signInFailure",545060,2353,547449,457,"console.log(h);skiMe.app.user.setCheckin(h",542636,44,"k",549435,76,"k",549512,101,"m,n",556813,38,"k",549741,32,"m,n){console.log",556905,35,"k.get(\"name\"))}})}",547933,441,"f=this;var d",548386,34,"d.getValues();var b=this",548717,35,";var c",548439,88,"c.setUser(skiMe.app.user",555488,66,"e",548618,98,"b.lat+', \"lng\":'+b",548804,56,"e",568800,59,"c.save({success:function(g,h){e.setEvent(g);e",555883,47,"Meeting point created !\");f",547344,52,"MeetingPoint(e);var k",549112,101,"m){m.members().each(function(n){k.push(n)})});",549167,32,549291,64,"m){k.push(m)});",549119,33,"removeAll()}k.forEach(function(n){var m",556639,59,"m.setUser(n);m.setEvent(g);m",568800,59,"m.save({success:function(o,p){f",542048,52,"newMeetingPointNotification(e,n);",556815,36,"n",549741,32,"o,p",556887,53,"n",549830,37,"j,k){f",549974,76,557209,42,549991,789,"increase",550783,215,"else{",550998,121,551118,478,551052,33,551628,732,"ProfilePicture!=null){this",553500,33,"skiMe.app.user.getProfilePicture().get(\"url\")",552540,36,"Picture(\"/files/img/default/dflt.jpg\")}",552339,256,"},openProfileFriend:function(g,c,j,b,h,d",551820,83,"b",552846,50,"b",551981,53,"b",552048,65,"b",552127,66,"b",552207,55,"b",553140,68,"b",552356,36,"b",553246,52,"f",552459,75,"f",553375,60,"if(b.getProfilePicture()!=null){this",553500,33,"b.getProfilePicture().get(\"url\")",552540,36,"Picture(\"/files/img/default/dflt.jpg\")}",553549,625,"d",554175,356,"var c",548439,84,"5});c.setUser(skiMe.app.user",555488,62,554531,38,"e,f",554572,32,";c.save({success:function(g,h){",542638,42,"j){var k",556639,59,"k.setUser(j);k.setEvent(g);k",568800,59,"k.save({success:function(l,m",556813,38,"j",549741,32,"l,m){d",556890,50,"j",549830,37,"g,h){d.requestFailure(\"An error occur",545167,34,"failure:function(e,f",554626,67,"d",554694,1582,"e",556277,1382,"ocket:null,setConnection:function(){this.socket=io.connect(\"http://10.192.81.72\"",557736,103,"this.",557839,57,"this.",557896,67,"this.",557963,67,"this.",558030,61,"this.",558091,75,"this.",558166,164,"this.",558330,101,"this.",558431,120,"this.",558551,195,"this.",558746,2660,"_i",561407,1412,567280,51,562871,2559,"Image",561552,71,"url",522006,39,565774,73,565402,45,"skiMe.model.Image,config:{fields:[",565501,103,562180,33,565665,89,563576,69,"associationKey:\"user\"},{name:\"resort\",instanceName:\"resort\",model:\"skiMe.model.Resort\",associationKey:\"resor",567152,67,566000,1331,"model.Webcam\",{extend:skiMe.model.Image,config:{fields:[",565501,36,561623,32,"resort_id\",type:\"int\"}],belongsTo:[{name:\"resort\",instanceName:\"resort\",model:\"skiMe.model.Resort\",associationKey:\"resor",567152,67,"webcam",567231,37,"webcam",567280,51,"model.ProfilePicture\",{extend:skiMe.model.Image,config:{fields:[",565658,96,563576,69,"associationKey:\"user\"},{name:\"resort\",instanceName:\"resort\",model:\"skiMe.model.Resort\",associationKey:\"resor",567152,67,"profile",566000,45,"rofileP",566045,63,"Resort",561552,71,"name\",type:\"string\"},{name:\"boundaries",565513,60,"isteskm\",type:\"float\"},{name:\"liftsnumber\",type:\"int\"},{name:\"seasonstart\",type:\"date\"},{name:\"seasonend\",type:\"date\"},{name:\"openfrom\",type:\"int\"},{name:\"openuntil\",type:\"int\"},{name:\"website\",type:\"string",521984,39,"{name:\"contact_tourism\",type:\"string\"},{name:\"contact_lifts",562957,71,"name",565816,32,522359,212,"profilePicture\",instanceName:\"profilePicture\",model:\"skiMe.model.ProfilePicture\",associationKey:\"profilePicture\",getterName:\"getProfilePicture\",setterName:\"setProfilePicture\"}],hasMany:[",523056,95,",{name:\"webcams\",instanceName:\"webcams\",model:\"skiMe.model.Webcam\",associationKey:\"webcams\"",566400,65,"resor",567230,38,"resor",567279,2626,"skiMe.store.Resor",567584,38,"resor",568560,35,"Resort\",storeId:\"resort",568087,104,"resor",568731,32,568228,188,"resort",569677,33,569905,6073,"if=\"profilePicture !== null",523904,77,"profilePicture.url_thumbnail}\" />',\"<tpl else>\"",576544,92,"dflt_thumb.jpg",579470,108,"},increase",576195,3171,"if=\"profilePicture !== null",523904,77,"profilePicture.url_thumbnail}\" />',\"<tpl else>\"",576544,92,"dflt_thumb.jpg",579470,5391,"if=\"profilePicture !== null",523904,77,"profilePicture.url_thumbnail}\" />',\"<tpl else>\"",576544,92,"dflt_thumb.jpg",579470,108,585073,2574,"define(\"skiMe.view.ImageCarousel\",{extend:Ext.carousel.Carousel,xtype:\"imageCarousel\",config:{itemId:\"imageCarousel\",fullscreen:true,modal:true,cls:\"carousel\",showAnimation:\"popIn\",hideAnimation:\"popOut\",indicator:false,images:[],items:[{xtype:\"button\",itemId:\"carouselCloseBtn\",iconCls:\"remove\",top:10,right:0,ui:\"plain\",cls:\"sm-titlebar-button\",hideOnMaskTap:false},{xtype:\"label\",itemId:\"carouselTitleLabel\",top:15,left:10,cls:\"sm-carousel-label\",html:\"\"},{xtype:\"titlebar\",itemId:\"carouselTitlebar\",title:\"\",docked:\"bottom\",cls:\"carousel-bottombar\",items:[{xtype:\"button\",itemId:\"carouselLeftBtn\",align:\"left\",iconCls:\"chevron-left\",ui:\"plain",584608,44,"itemId:\"carouselRightBtn\",align:\"right\",iconCls:\"chevron-right\",ui:\"plain\",cls:\"sm-titlebar-b",533988,34,"carouselLeftBtn\",event:\"tap\",fn:\"onCarouselLeftBtnTap\"},{delegate:\"#carouselRightBtn\",event:\"tap\",fn:\"onCarouselRightBtnTap\"},{delegate:\"#carouselCloseBtn\",event:\"tap\",fn:\"onCarouselCloseBtnTap\"},{event:\"activeitemchange\",fn:\"onActiveItemChange",524934,37,";var b=this.getImages();b.each(function(c){a.add({xtype:\"image\",baseCls:\"carousel-item\",src:c.get(\"url\"),title:c.get(\"title\"),index:b.indexOf(c)})});this.callParent(argument",202132,32,"b,a){this.down(\"#carouselTitlebar\").setTitle(a.config.index+1+\" of \"+this.getImages().getAllCount());this.down(\"#carouselTitleLabel\").setHtml(a.config.title)},onCarouselCloseBtnTap:function(){this.hide();this",545344,45,"onCarouselRightBtnTap:function(){this.next()},onCarouselLeftBtnTap:function(){this.previous",587637,644,",\"Webcam\",\"ProfilePicture\",\"Picture\",\"Resor",588279,219,",\"ImageCarousel",588497,233,",\"Resort",588724,219,"_i",588944,42,589136,66,589080,442]