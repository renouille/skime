["/*657c4e1cb98f15d8ed4ed40c57839ec570f90f31",42,311096,"carousel.Item\",{extend:Ext.Decorator,config:{baseCls:\"x-carousel-item\",component:null,translatable:true}});Ext.define(\"Ext.carousel.Indicato",417506,32,"carouselindicator\",alternateClassName:\"Ext.Carousel.Indicato",417551,38,"carousel-indicator\",direction:\"horizontal\"",479840,42,"this.indicators=[];this.element.on({tap:\"onTap\",scope:this})}",416071,79,"c,a,b);if(a===\"horizontal\"){this.setBottom(0);this.setRight(null)}else{this.setRight(0);this.setBottom(null)}},addIndicator:function(){this.indicators.push(this.element.createChild({tag:\"span\"}))},removeIndicator:function(){var a=this.indicators;if(a.length>0){a.pop().destroy()}},setActiveIndex:function(b){var e=this.indicators,d=this.activeIndex,a=e[d],f=e[b],c=this.getBaseCls();if(a){a.removeCls(c,null,\"active\")}if(f){f.addCls(c,null,\"active\")}this.activeIndex=b;return this},onTap:function(f){var g=f.touch,a=this.element.getPageBox(),d=a.left+(a.width/2),b=a.top+(a.height/2),c=this.getDirection();if((c===\"horizontal\"&&g.pageX>=d)||(c===\"vertical\"&&g.pageY>=b)){this.fireEvent(\"next\",this)}else{this.fireEvent(\"previou",455056,34,"d=this.indicators,b,c,a;for(b=0,c=d.length;b<c;b++){a=d[b];a.destroy()}d.length=0",279995,38,"util.TranslatableGroup",150911,49,"items:[],activeIndex:0,itemLength:{x:0,y:0}},applyItems:function(a){return Ext.Array.from(a)},doTranslate:function(n,m){var l=this.getItems(),p=this.getActiveIndex(),j=this.getItemLength(),d=j.x,c=j.y,h=typeof n==\"number\",g=typeof m==\"number\",e,f,k,o,b,a;for(f=0,k=l.length;f<k;f++){o=l[f];if(o){e=(f-p);if(h){b=n+e*d}if(g){a=m+e*c}o.translate(b,a)}}}});Ext.define(\"Ext.carousel.Carous",252823,50,"Carousel\",xtype:\"carousel\",config:{baseCls:\"x-carousel\",direction:\"horizontal\",directionLock:false,animation:{duration:250,easing:{type:\"ease-out\"}},indicator:true,ui:\"dark\",itemConfig:{},bufferSize:1,itemLength:null},itemLength:0,offset:0,flickStartOffset:0,flickStartTime:0,dragDirection:0,count:0,painted:false,activeIndex:-1",297965,34,"element.on(",154059,59,"scope:this});this.element.on(\"resize\",\"onSizeChange\",this);this.carouselItems=[];this.orderedCarouselItems=[];this.inactiveCarouselItems=[];this.hiddenTranslation=0},updateBufferSize:function(n){var l=Ext.carousel.Item,h=n*2+1,m=this.isRendered(),c=this.innerElement,g=this.carouselItems,f=g.length,e=this.getItemConfig(),d=this.getItemLength(),j=this.getDirection(),b=j===\"horizontal\"?\"setWidth\":\"setHeight\",a,k;for(a=f;a<h;a++){k=Ext.factory(e,l);if(d){k[b].call(k,d)}k.setLayoutSizeFlags(this.LAYOUT_BOTH);g.push(k);c.append(k.renderElement);if(m&&k.setRendered(true)){k.fireEvent(\"renderedchange\",this,k,true)}}this.getTranslatable().setActiveIndex(n)},setRendered:function(g){var a=this.rendered;if(g!==a){this.rendered=g;var b=this.items.items,d=this.carouselItems,c,f,e;for(c=0,f=b.length;c<f;c++){e=b[c];if(!e.isInnerItem()){e.setRendered(g)}}for(c=0,f=d.length;c<f;c++){d[c].setRendered(g)}return true}return false},onSizeChange:function(){this.refreshSizing();this.refreshCarouselItems();this.refreshActiveItem()},onItemAdd:function(c,b",394718,33,"d=this.getInnerItems().indexOf(c),a=this.getIndicator();if(a&&c.isInnerItem()){a.addIndicator()}if(d<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(d)&&!this.isItemsInitializing){this.refreshActiveItem()}},doItemLayoutAdd:function(a){if(a.isInnerItem()",487875,35,"},onItemRemove:function(f,b",394718,33,"h=this.getInnerItems().indexOf(f),a=this.getIndicator(),d=this.carouselItems,c,e,g;if(f.isInnerItem()&&a){a.removeIndicator()}if(h<=this.getActiveIndex()){this.refreshActiveIndex()}if(this.isIndexDirty(h)){for(c=0,e=d.length;c<e;c++){g=d[c];if(g.getComponent()===f){g.setComponent(null)}}this.refreshActiveItem()}},doItemLayoutRemove:function(a){if(a.isInnerItem()",487875,35,"},onInnerItemMove:function(b,c,a){if((this.isIndexDirty(c)||this.isIndexDirty(a))){this.refreshActiveItem()}},doItemLayoutMove:function(a){if(a.isInnerItem()",487875,35,"},isIndexDirty:function(b){var a=this.getActiveIndex(),c=this.getBufferSize();return(b>=a-c&&b<=a+c)},getTranslatable",153402,39,153065,49,"Group;a.setItems(this.orderedCarouselItems);a.on(\"animationend\",\"onAnimationEnd\",this)}return a},onDragStart:function(f){var d=this.getDirection(),b=f.absDeltaX,a=f.absDeltaY,c=this.getDirectionLock();this.isDragging=true;if(c){if((d===\"horizontal\"&&b>a)||(d===\"vertical\"&&a>b)){f",227232,54,229135,38,";this.dragStartOffset=this.offset;this.dragDirection=0},onDrag:function(k",227945,34,"l=this.dragStartOffset,m=this.getDirection(),n=m===\"horizontal\"?k.deltaX:k.deltaY,a=this.offset,j=this.flickStartTime,c=this.dragDirection,b=Ext.Date.now(),h=this.getActiveIndex(),f=this.getMaxItemIndex(),d=c,g;if((h===0&&n>0)||(h===f&&n<0)){n*=0.5}g=l+n;if(g>a){c=1}else{if(g<a){c=-1}}if(c!==d||(b-j)>300){this.flickStartOffset=a;this.flickStartTime=b}this.dragDirection=c;this.setOffset(g)},onDragEnd:function(k",156596,42,"k);this.isDragging=false;var a=Ext.Date.now(),j=this.itemLength,g=j/2,f=this.offset,n=this.getActiveIndex(),c=this.getMaxItemIndex(),h=0,m=f-this.flickStartOffset,b=a-this.flickStartTime,l=this.getIndicator(),d;if(b>0&&Math.abs(m)>=10){d=m/b;if(Math.abs(d)>=1){if(d<0&&n<c){h=-1}else{if(d>0&&n>0){h=1}}}}if(h===0){if(n<c&&f<-g){h=-1}else{if(n>0&&f>g){h=1}}}if(l){l.setActiveIndex(n-h)}this.animationDirection=h;this.setOffsetAnimated(h*j)},applyAnimation:function(a){a.easing=Ext.factory(a.easing,Ext.fx.easing.EaseOut);",223487,49,"getIndicator();this.currentAxis=(b===\"horizontal\")?\"x\":\"y\";if(a){a.setDirection(b)}},setOffset:function(a){this.offset=a",223241,33,"Axis(this.currentAxis,a+this.itemOffset);return this},setOffsetAnimated:function(b){var a=this.getIndicator();if(a){a.setActiveIndex(this.getActiveIndex()-this.animationDirection)}this.offset=b",223241,33,"Axis(this.currentAxis,b+this.itemOffset,this.getAnimation());return this},onAnimationEnd:function(b){var c=this.getActiveIndex(),a=this.animationDirection,e=this.currentAxis,f=b[e],d=this.itemLength,g;if(a===-1){g=d+f}else{if(a===1){g=f-d}else{g=f}}g-=this.itemOffset;this.offset=g;this.setActiveItem(c-a",157267,34,"Sizing();this.refreshActiveItem()},refreshSizing:function(){var a=this.element,b=this.getItemLength(),e={x:0,y:0},c,d;if",190331,35,"){d=a.getWidth()}else{d=a.getHeight()}this.hiddenTranslation=-d;if(b===null){b=d;c=0}else{c=(d-b)/2}this.itemLength=b;this.itemOffset=c;e[this.currentAxis]=b;this.getTranslatable().setItemLength(e)},refreshOffset:function(){this.setOffset(this.offset)},refreshActiveItem:function(){this.doSetActiveItem(this.getActiveItem())},getActiveIndex:function(){return this.activeIndex},refreshActiveIndex:function(){this.activeIndex=this.getInnerItemIndex(this.getActiveItem())},refreshCarouselItems:function(){var a=this.carousel",183055,47,"c.getTranslatable().refresh()}this.refreshInactiveCarouselItems()},refreshInactiveCarouselItems:function(){var a=this.inactiveCarouselItems,f=this.hiddenTranslation,c=this.currentAxis,b,e,d;for(b=0,e=a.length;b<e;b++){d=a[b];d.translateAxis(c,f)}},getMaxItemIndex",247888,34,".length-1},getInnerItemIndex",245706,48,"getInnerItemAt",245706,35,"[a]},applyActiveItem:function(){var b=this.callParent(arguments),a;if(b){a=this.getInnerItemIndex(b);if(a!==-1){this.activeIndex=a;return b}}},doSetActiveItem:function(g){var q=this.getActiveIndex(),e=this.getMaxItemIndex(),m=this.getIndicator(),c=this.getBufferSize(),k=this.carouselItems.slice(),n=this.orderedCarouselItems,p={},o={},a,l,b,f,h,j,d;if(k.length===0",487875,36,"n.length=0;if(g){b=g.getId();o[b]=g;p[b]=c;if(q>0){for(f=1;f<=c;f++){h=q-f;if(h>=0){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c-f}else{break}}}if(q<e){for(f=1;f<=c;f++){h=q+f;if(h<=e){a=this.getInnerItemAt(h);b=a.getId();o[b]=a;p[b]=c+f}else{break}}}for(f=0,j=k.length;f<j;f++){d=k[f];l=d.getComponent();if(l){b=l.getId();if(p.hasOwnProperty(b)){k.splice(f,1);f--;j--;delete o[b];n[p[b]]=d}}}for(b in o){if(o.hasOwnProperty(b)){a=o[b];d=k.pop();d.setComponent(a);n[p[b]]=d}}}this.inactiveCarouselItems.length=0;this.inactiveCarouselItems=k;this.refreshOffset();this.refreshInactiveCarouselItems();if(m){m.setActiveIndex(q)}},next:function(){this.setOffset(0);if(this.activeIndex===this.getMaxItemIndex()){return this}this.animationDirection=-1;this.setOffsetAnimated(-this.itemLength);return this},previous:function(){this.setOffset(0);if(this.activeIndex===0){return this}this.animationDirection=1;this.setOffsetAnimated(this.itemLength);return this},applyIndicato",235392,41,"carousel.Indicator",283130,33,"if(a){this.insertFirst(a);a.setUi(this.getUi());a.on({next:\"next\",previous:\"previous\",scope:this})",152000,33,"carouselItems.slice();this.carouselItems.length=0;Ext.destroy(a,this.getIndicator(),this.translatable);this.callParent();delete this.carouselItems",485184,33,311138,209860,"/10.192.81.72",521024,34,"10.192.81.72",521084,43,"10.192.81.72/skime",389952,45,521204,2261,562640,51,523517,3019,"webcam",526520,2341,"setWebcam",528780,36,528861,146,"this.getWebcam",528985,1113,530435,1981,"g.onclick=function(){console.log(\"Feature not ready yet.\")}",532415,35,"e.appendChild(g",532448,1187,530101,34,"b=this.getOwnPositionMarker();var d=this.getGeo();var c=null;if(b!=null){this.getMap().removeLayer(b)}",530213,82,"Latitude(),d",530325,45,"this",530371,33,"this.getMap());return d",533630,324,",addWebcam:function(a){var b=this.getWebcamLayerGroup();var c=L.AwesomeMarkers.icon({icon:\"picture\",color:\"darkblue\"});webcamMarker=L.marker([a.lat,a.lng],{icon:c});b.addLayer(webcamMarker);return webcamMarker",533953,2921,536912,138,537079,2103,"6",539183,140,539370,126,"c,b,e){if(e){console.log(\"Pistes loaded\"",539564,71,"d",539636,38,"d",539675,43,539729,53,"c,b,e){if(e){console.log(\"Lifts loaded\"",539564,71,"d",539636,38,"d",539675,43,540014,61,"c,b,d){a.dataLoaded();if(d",540114,91,540216,55,"c,b,d){a.dataLoaded();if(d",540310,32,540383,169,"No friends found",540579,59,"c,b,d){a.dataLoaded();if(d",540664,196,"No groups found.\")}}});Ext.getStore(\"resort",540239,32,"c,b,d){if(d){console.log(\"Resorts loaded\"",539564,35,"Error while loading resort",540885,176,"MapController\").showData(",559536,39,541061,1391,"s:{}",542468,158,542697,329,"2",543027,80,"meetingPointStore\").sync",559270,45,543135,232,"resortStore\").each(function(c){c.webcams().each(function(d){b.addWebcam(d,c.webcams())})}",543392,38,543431,416,543920,34,525408,55,543979,79,"d,a,e){var c=this.getFriendsMarkers();if(d.getId() in c){var f=c[d",544123,50,"f)}var h=d.get(\"name\");var ",544271,36,"d",525422,41,";var g=null;if(e){g=\"green\"}else{g",544355,56,"g);c[d",544417,43,"c,b){var d=this.getFriendsMarkers();if(c.getId() in d){var a=d[c.getId()];a.setLatLng(b);console.log(\"marker updated\")}},addWebcam:function(b,d){var c=this",558880,42,"var e=this.getLeafletmap().addWebcam(a);e.on(\"click\",function(f){var g=Ext.Viewport.add({xtype:\"imageCarousel\",images:d});g.setActiveItem(d.indexOf(b));g.down(\"#carouselTitlebar\").setTitle(d.indexOf(b)+1+\" of \"+d.getAllCount());g.show()}",558171,34,"Log",545979,55,544639,621,545261,197,545459,60,",failure:function(j){b.signInFailure",545516,2353,"!=null){",548890,89,"1",548980,93,548096,266,"console.log(h);skiMe.app.user.setCheckin(h",559271,44,"k){var l",557231,59,"l.setUser(k",549968,101,"m,n){",550160,36,"k",550197,32,"m,n){console.log",550250,35,"k.get(\"name\"))}})});",550074,53,548444,386,"f=this;var d",548842,34,"d.getValues();var b=this",549225,35,";var c",548895,88,"c.setUser(skiMe.app.user",556080,66,"e",549074,98,"b.lat+', \"lng\":'+b",549260,56,"e",570512,59,"c.save({success:function(g,h){e.setEvent(g);e",556475,47,"Meeting point created !\");f",560907,65,"e);var k",549568,101,"m){m.members().each(function(n){k.push(n",549709,102,"m){k.push(m",549822,49,"k.forEach(function(n){var m",557231,59,"m.setUser(n);m.setEvent(g);m",570512,59,"m.save({success:function(o,p){f",550075,80,"e,n",550158,38,"n",550197,32,"o,p){f",550235,50,"n",550286,37,"j,k){f",550430,76,557801,42,550447,789,"increase",551239,215,"else{",551454,121,551574,3192,"d",554767,356,"var c",548895,84,"5});c.setUser(skiMe.app.user",556080,62,555123,38,"e,f",555164,32,";c.save({success:function(g,h){",559273,42,"j){var k",557231,59,"k.setUser(j);k.setEvent(g);k",570512,59,"k.save({success:function(l,m){",550160,36,"j",550197,32,"l,m){d",550235,50,"j",550286,37,"g,h){d.requestFailure(\"An error occur",550474,32,"},failure:function(e,f",555218,67,"d",555286,1582,"e",556869,1382,"ocket:null,setConnection:function(){this.socket=io.connect(\"http://10.192.81.72\"",558328,103,"this.",558431,57,"this.",558488,67,"this.",558555,67,"this.",558622,61,"this.",558683,75,"this.",558758,164,"this.",558922,101,"this.",559023,120,"this.",559143,195,"this.",559338,4074,562640,57,563470,6795,"resort",523424,37,"resort",562640,51,570362,2574,"skiMe.store.Resort",571020,37,"resort",572287,34,"Resort\",storeId:\"resort",571118,104,"resort",571228,219,"resort",571486,33,572936,6440,"increase",579379,11758,"define(\"skiMe.view.ImageCarousel\",{extend:Ext.carousel.Carousel,xtype:\"imageCarousel\",config:{itemId:\"imageCarousel\",fullscreen:true,modal:true,cls:\"carousel\",showAnimation:\"popIn\",hideAnimation:\"popOut\",indicator:false,images:[],items:[{xtype:\"button\",itemId:\"carouselCloseBtn\",iconCls:\"remove\",top:10,right:0,ui:\"plain\",cls:\"sm-titlebar-button\",hideOnMaskTap:false},{xtype:\"label\",itemId:\"carouselTitleLabel\",top:15,left:10,cls:\"sm-carousel-label\",html:\"\"},{xtype:\"titlebar\",itemId:\"carouselTitlebar\",title:\"\",docked:\"bottom\",cls:\"carousel-bottombar\",items:[{xtype:\"button\",itemId:\"carouselLeftBtn\",align:\"left\",iconCls:\"chevron-left\",ui:\"plain\"",523884,35,"button\",itemId:\"carouselRightBtn\",align:\"right\",iconCls:\"chevron-right\",ui:\"plain\",cls:\"sm-titlebar-b",534408,34,"carouselLeftBtn\",event:\"tap\",fn:\"onCarouselLeftBtnTap\"},{delegate:\"#carouselRightBtn\",event:\"tap\",fn:\"onCarouselRightBtnTap\"},{delegate:\"#carouselCloseBtn\",event:\"tap\",fn:\"onCarouselCloseBtnTap\"},{event:\"activeitemchange\",fn:\"onActiveItemChange\"}]",292120,35,"var b=this.getImages();b.each(function(c){a.add({xtype:\"image\",baseCls:\"carousel-item\",src:c.get(\"url\"),title:c.get(\"title\"),index:b.indexOf(c)})});this.callParent(argument",202132,32,"b,a){this.down(\"#carouselTitlebar\").setTitle(a.config.index+1+\" of \"+this.getImages().getAllCount());this.down(\"#carouselTitleLabel\").setHtml(a.config.title)},onCarouselCloseBtnTap:function(){this.hide();this",554221,45,"onCarouselRightBtnTap:function(){this.next()},onCarouselLeftBtnTap:function(){this.previous",591127,906,",\"ImageCarousel",592032,233,",\"Resort",592259,263,592672,66,592616,442]